(()=>{"use strict";var e=[{rank:5,firstName:"Мария",lastName:"Иванова",created:"2021-05-30",text:" Отзыв 1  Отзыв 1 Отзыв 1 Отзыв 1 Отзыв 1 Отзыв 1 Отзыв 1",answer:"Ответ 1"},{rank:4,firstName:"Нина",lastName:"Семёнова",created:"2021-05-31",text:" Отзыв 2",answer:" Ответ на отзыв № 2. Спасибо, обращайтесь еще"},{rank:2,firstName:"Папа",lastName:"Злой",created:"2021-05-30",text:" Отчего и почему",answer:"Вам будет предоставлена скидка"},{rank:3,firstName:"Любовь",lastName:"Овсянникова",created:"2021-05-30",text:"\n         Lorem ipsum dolor sit amet consectetur, adipisicing elit. Repellat eveniet eius deleniti quam aut? Atque mollitia animi incidunt optio, excepturi autem cupiditate, placeat in saepe sint eum consectetur nam, repellat laudantium molestiae eius pariatur assumenda labore repellendus laboriosam. Dicta, laborum beatae? Aperiam dolores ab laudantium. Consectetur, neque libero eaque porro, illo sed distinctio exercitationem illum voluptatem corporis molestias dolor obcaecati voluptas ipsam fuga dolores eum expedita voluptatibus esse nostrum non ab dignissimos. Enim nihil distinctio, iste nobis tenetur culpa consequuntur dolore iusto cum dicta autem accusamus explicabo consectetur odio esse omnis ut, deleniti ducimus laboriosam! Iste ut laboriosam maiores nobis.\n    ",answer:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Repellat eveniet eius deleniti quam aut? Atque mollitia animi incidunt optio, excepturi autem cupiditate, placeat in saepe sint eum consectetur nam, repellat laudantium molestiae eius pariatur assumenda labore repellendus laboriosam. Dicta, laborum beatae? Aperiam dolores ab laudantium. Consectetur, neque libero eaque porro, illo sed distinctio exercitationem illum voluptatem corporis molestias dolor obcaecati voluptas ipsam fuga dolores eum expedita voluptatibus esse nostrum non ab dignissimos. Enim nihil distinctio, iste nobis tenetur culpa consequuntur dolore iusto cum dicta autem accusamus explicabo consectetur odio esse omnis ut, deleniti ducimus laboriosam! Iste ut laboriosam maiores nobis."}];function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._container=document.querySelector(n)}var n,r;return n=e,(r=[{key:"setItems",value:function(e){this._items=e}},{key:"renderItems",value:function(){var e=this;this._clear(),this._items.forEach((function(t){e.addItem(t)}))}},{key:"_clear",value:function(){this._container.innerHTML=""}},{key:"addItem",value:function(e){this._container.prepend(this._renderer(e))}}])&&t(n.prototype,r),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._card=t}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(".review-template").content.querySelector(".reviews__item").cloneNode(!0)}},{key:"_getFio",value:function(){var e=this._card.lastName?this._card.lastName[0]+".":"";return this._card.firstName+" "+e}},{key:"generateCard",value:function(){this._element=this._getTemplate(),this._element.querySelector(".reviews__name").textContent=this._getFio();for(var e=this._element.querySelector(".reviews__rank"),t=0;t<this._card.rank;t++)e.insertAdjacentHTML("beforeend",'<span class="reviews__heart-icon"></span>');return this._element.querySelector(".reviews__date").textContent=this._card.created,this._element.querySelector(".reviews__text").textContent=this._card.text,this._element.querySelector(".reviews__answer").textContent=this._card.answer,this._element}}])&&r(t.prototype,n),e}();function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i,c=document.querySelector(".header"),s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw i}}}}(document.querySelectorAll('.header a[href^="#"]'));try{var u=function(){var e=i.value;e.addEventListener("click",(function(t){t.preventDefault();var n=e.hasAttribute("href")?e.getAttribute("href"):"body",r=document.querySelector(n).getBoundingClientRect().top+pageYOffset-c.offsetHeight;window.scrollTo({top:r,behavior:"smooth"})}))};for(s.s();!(i=s.n()).done;)u()}catch(e){s.e(e)}finally{s.f()}if(document.querySelectorAll(".callback__submit-btn").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),function(e){var t,n=e.target.closest(".callback__form");(t=function(e){var t={};return e.querySelectorAll(".callback__form-field").forEach((function(e){t[e.name]=e.value})),t}(n),fetch("http://84.38.180.241/api/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).then((function(e){return e.ok?(n.reset(),e.json()):Promise.reject("Ошибка ".concat(e.status))})).catch((function(e){return console.log(e)}))}(e)}))})),-1!=window.location.pathname.indexOf("reviews.html")){var l=document.querySelectorAll(".reviews__filter-btn"),d=new n((function(e){return new o(e).generateCard()}),".reviews__list");function m(t){var n=[];switch(t.target.dataset.filter){case"good":n=e.filter((function(e){return e.rank>3}));break;case"neutral":n=e.filter((function(e){return 3===e.rank}));break;case"negative":n=e.filter((function(e){return e.rank<3}));break;default:n=e}d.setItems(n),d.renderItems()}l.forEach((function(e){e.addEventListener("click",m)})),d.setItems(e),d.renderItems()}var f=document.querySelectorAll(".call-btn"),p=document.querySelectorAll(".popup"),_=document.querySelector(".popup_type_callback"),v=document.querySelectorAll(".popup__close-btn"),b=document.querySelector(".page"),h=document.querySelector(".callback__form");function y(e){e.classList.add("popup_visible"),document.addEventListener("keydown",k),b.classList.add("page_noscroll")}function g(e){e.classList.remove("popup_visible"),document.removeEventListener("keydown",k),b.classList.remove("page_noscroll"),h.reset()}function k(e){"Escape"===e.key&&g(document.querySelector(".popup_visible"))}f.forEach((function(e){e.addEventListener("click",(function(){y(_)}))})),v.forEach((function(e){e.addEventListener("click",(function(e){g(e.target.closest(".popup"))}))})),p.forEach((function(e){e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup")&&g(e)}))}));var q=document.querySelector(".span-accent_type_docs"),w=document.querySelector(".popup_type_docs");q&&q.addEventListener("click",(function(){y(w)}));var S=document.querySelector(".span-accent_type_check"),E=document.querySelector(".popup_type_check");S&&S.addEventListener("click",(function(){y(E)}));var L=document.querySelectorAll(".about__question");L&&L.forEach((function(e){e.addEventListener("click",(function(){e.classList.toggle("about__question_opened"),e.nextElementSibling.classList.toggle("about__answer_visible")}))}));var x=document.querySelector(".header__burger"),A=document.querySelector(".header__list-response");x.addEventListener("click",(function(){x.classList.toggle("header__burger_opened"),A.classList.toggle("header__list-response_opened")}))})();